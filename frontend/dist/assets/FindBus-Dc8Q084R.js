import{o,c as i,r as S,F as b,t as h,a as O,w as s,b as d,u as A,m as J,d as j,e as M,f as g,g as a,h as L,i as q,j as N,v as E}from"./index-CU9jrytz.js";import{s as z}from"./card.esm-BKN9kDPo.js";const G={key:1},H={__name:"Schedule",props:["schedule"],setup(x){const k=x;return(m,p)=>k.schedule.message?(o(),i("p",G,h(k.schedule.message),1)):(o(!0),i(b,{key:0},S(k.schedule,u=>(o(),O(A(z),{style:{margin:"10px"}},{title:s(()=>[d(h(u.start)+"---"+h(u.end),1)]),subtitle:s(()=>[d(h(u.company),1)]),content:s(()=>[(o(!0),i(b,null,S(u.places,f=>(o(),i("p",null,[d(h(f.place)+" |",1),(o(!0),i(b,null,S(f.hours,w=>(o(),i(b,null,[d(h(w)+"|",1)],64))),256))]))),256))]),_:2},1024))),256))}},I=["value","id"],K=["for"],Y={__name:"FindBus",props:{end:{},endModifiers:{},start:{},startModifiers:{}},emits:J(["setDisplayMessage","setMessageRef","setSeverityRef"],["update:end","update:start"]),setup(x,{emit:k}){const m=j(x,"end"),p=j(x,"start"),u=M(!1),f=M(),w=M(),c=M([]),V=k,_=(t,e)=>{V("setDisplayMessage",!0),V("setMessageRef",t),V("setSeverityRef",e)};(async()=>{try{const e=await(await fetch("http://localhost:5170/api/schedules/companies")).json();w.value=await e}catch(t){_(t.message,"error")}})();const D=()=>{c.value=[...w.value]},B=()=>{c.value=[]},y=t=>{if(t){if(t.length>=3)return!0}else return!1},C=async(t,e,v)=>{if(c.value.length>0){if(e&&v)try{const r=await(await fetch(t,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({end:e,start:v,companies:c})})).json();f.value=r,u.value=!0}catch(l){_(l.message,"error")}else if(e)try{const r=await(await fetch(t,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({end:e,companies:c})})).json();f.value=r,u.value=!0}catch(l){_(l.message,"error")}else if(v)try{const r=await(await fetch(t,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({start:v,companies:c})})).json();f.value=r,u.value=!0}catch(l){_(l.message,"error")}}},P=()=>{const t=m.value,e=p.value;y(m.value)&&y(p.value)?C("http://localhost:5170/api/schedules/bus-line",t,e):_("not enough data","info")},T=()=>{const t=m.value,e=p.value;y(m.value)&&y(p.value)?C("http://localhost:5170/api/schedules/bus-stops/filter-companies",t,e):y(t)?C("http://localhost:5170/api/schedules/bus-stops/filter-companies",t):y(e)?C("http://localhost:5170/api/schedules/bus-stops/filter-companies",e):_("no data","info")};return(t,e)=>{const v=g("v-text-field"),l=g("v-col"),r=g("v-btn"),$=g("v-row"),F=g("v-container"),R=g("v-form");return o(),i(b,null,[a(R,null,{default:s(()=>[a(F,null,{default:s(()=>[a($,null,{default:s(()=>[a(l,{cols:"12",md:"4"},{default:s(()=>[a(v,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=n=>p.value=n),label:"start min 3 characters","hide-details":"",required:""},null,8,["modelValue"])]),_:1}),a(l,{cols:"12",md:"4"},{default:s(()=>[a(v,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=n=>m.value=n),counter:10,label:"destination min 3 characters","hide-details":"",required:""},null,8,["modelValue"])]),_:1}),a($,null,{default:s(()=>[a(l,{cols:"12",md:"4"},{default:s(()=>[(o(!0),i(b,null,S(w.value,n=>(o(),i("div",null,[q(N("input",{"onUpdate:modelValue":e[2]||(e[2]=U=>c.value=U),type:"checkbox",name:"company",value:n,id:n,class:""},null,8,I),[[E,c.value]]),N("label",{for:n},h(n),9,K)]))),256)),a(r,{onClick:e[3]||(e[3]=n=>D()),class:"my-2 mx-2"},{default:s(()=>[d("Check all")]),_:1}),a(r,{onClick:e[4]||(e[4]=n=>B()),class:"my-2 mx-2"},{default:s(()=>[d("Uncheck all")]),_:1})]),_:1})]),_:1})]),_:1}),a($,null,{default:s(()=>[a(r,{onClick:e[5]||(e[5]=n=>P()),class:"my-2 mx-2"},{default:s(()=>[d(" find with bus line ")]),_:1}),a(r,{onClick:e[6]||(e[6]=n=>T()),class:"my-2 mx-2"},{default:s(()=>[d(" find with bus stops ")]),_:1})]),_:1})]),_:1})]),_:1}),u.value===!0?(o(),O(H,{key:0,schedule:f.value},null,8,["schedule"])):L("",!0)],64)}}};export{Y as default};
